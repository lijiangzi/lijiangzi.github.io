(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ea066f72"],{"0151":function(e,t,a){},"2eb4":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[e._v("个人中心")]),a("div",[e._v("\n    当前用户："+e._s(this.$store.state.user.name)+"\n    "),a("a",{attrs:{href:"javascript:;"},on:{touchstart:e.handleLogout}},[e._v("退出")])]),this.$store.state.user.isAdmin?a("div",[e._v("\n    用户身份：管理员\n    "),a("a",{attrs:{href:"/admin",target:"_blank"}},[e._v("进入管理后台")])]):a("div",[e._v("用户身份：普通会员")]),a("div",[a("input",{attrs:{type:"file",name:"file",value:"上传头像"},on:{change:e.handleToUpload}}),a("img",{staticClass:"userHead",attrs:{src:e.$store.state.user.userHead}})])])},s=[],o=(a("7f7f"),a("bc3a")),i=a.n(o),r=a("7826"),d={name:"center",methods:{handleLogout:function(){var e=this;this.axios.get("/api2/users/logout").then(function(t){var a=t.data.status;0==a&&(localStorage.removeItem("name"),localStorage.removeItem("isAdmin"),e.$store.commit("user/USER_NAME",{name:"",isAdmin:!1,userHead:""}),e.$router.push("/mine/login"))})},handleToUpload:function(e){var t=this,a=e.target.files[0],n=new FormData;n.append("file",a,a.name);var s={headers:{"Content-Type":"multipart/form-data"}};this.axios.post("/api2/users/uploadUserHead",n,s).then(function(e){var a=e.data.status,n=t;0===a?Object(r["a"])({title:"信息",content:"上传头像成功",ok:"确定",handleOk:function(){n.$store.commit("user/USER_NAME",{name:n.$store.state.user.name,isAdmin:n.$store.state.user.isAdmin,userHead:e.data.data.userHead+"?"+Math.random()})}}):Object(r["a"])({title:"信息",content:"上传头像失败",ok:"确定"})})}},beforeRouteEnter:function(e,t,a){i.a.get("/api2/users/getUser").then(function(e){var t=e.data.status;a(0===t?function(t){localStorage.setItem("name",e.data.data.username),localStorage.setItem("isAdmin",e.data.data.isAdmin),t.$store.commit("user/USER_NAME",{name:e.data.data.username,isAdmin:e.data.data.isAdmin,userHead:e.data.data.userHead})}:"/mine/login")})}},l=d,c=(a("c80f"),a("2877")),u=Object(c["a"])(l,n,s,!1,null,null,null);t["default"]=u.exports},7826:function(e,t,a){"use strict";var n=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"messageBox"},[a("h2",[e._v(e._s(e.title))]),a("p",[e._v(e._s(e.content))]),a("div",[e.cancel?a("div",{on:{touchstart:e.handleCancel}},[e._v(e._s(e.cancel))]):e._e(),e.ok?a("div",{on:{touchstart:e.handleOk}},[e._v(e._s(e.ok))]):e._e()])])},o=[],i={name:"MessageBox"},r=i,d=(a("dea5"),a("2877")),l=Object(d["a"])(r,s,o,!1,null,null,null),c=l.exports;a.d(t,"a",function(){return u});var u=function(){return function(e){var t={title:"",content:"",cancel:"",ok:"",handleCancel:null,handleOk:null},a=n["default"].extend(c);for(var s in e)t[s]=e[s];var o=new a({el:document.createElement("div"),data:{title:t.title,content:t.content,cancel:t.cancel,ok:t.ok},methods:{handleCancel:function(){t.handleCancel&&t.handleCancel.call(this),document.body.removeChild(o.$el)},handleOk:function(){t.handleOk&&t.handleOk.call(this),document.body.removeChild(o.$el)}}});document.body.appendChild(o.$el)}}()},adc5:function(e,t,a){},c80f:function(e,t,a){"use strict";var n=a("0151"),s=a.n(n);s.a},dea5:function(e,t,a){"use strict";var n=a("adc5"),s=a.n(n);s.a}}]);